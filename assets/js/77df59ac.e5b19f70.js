(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{171:function(e,t,n){"use strict";n.r(t),n.d(t,"MDXContext",(function(){return l})),n.d(t,"MDXProvider",(function(){return p})),n.d(t,"mdx",(function(){return f})),n.d(t,"useMDXComponents",(function(){return m})),n.d(t,"withMDXComponents",(function(){return u}));var i=n(0),a=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){return function(t){var n=m(t.components);return a.a.createElement(e,o({},t,{components:n}))}},m=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):d(d({},t),e)),n},p=function(e){var t=m(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),l=m(n),u=i,p=l["".concat(o,".").concat(u)]||l[u]||h[u]||r;return n?a.a.createElement(p,d(d({ref:t},s),{},{components:n})):a.a.createElement(p,d({ref:t},s))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=b;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},52:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return d})),n.d(t,"default",(function(){return l}));var i=n(3),a=n(8),r=(n(0),n(171)),o={sidebar_position:3,keywords:"pallet design, intermediate, runtime",theme:"codeview",code:"code/kitties-tutorial/02-create-kitties.rs"},s={unversionedId:"Tutorials/Kitties/create-kitties",id:"Tutorials/Kitties/create-kitties",isDocsHomePage:!1,title:"Part II: Create, view and own Kitties",description:"In this part of the tutorial, we'll build the parts of our pallet",source:"@site/docs/07-Tutorials/01-Kitties/create-kitties.md",sourceDirName:"07-Tutorials/01-Kitties",slug:"/Tutorials/Kitties/create-kitties",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/create-kitties",editUrl:"https://github.com/substrate-developer-hub/substrate-how-to-guides/edit/main/docs/07-Tutorials/01-Kitties/create-kitties.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,keywords:"pallet design, intermediate, runtime",theme:"codeview",code:"code/kitties-tutorial/02-create-kitties.rs"},sidebar:"tutorialSidebar",previous:{title:"Part I: Basic set-up",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/basic-setup"},next:{title:"Part III: Interacting with your Kitties",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/interacting-functions"}},d=[{value:"Learning outcomes",id:"learning-outcomes",children:[]},{value:"Overview",id:"overview",children:[]},{value:"Steps",id:"steps",children:[{value:"1. Create the Kitty struct",id:"1-create-the-kitty-struct",children:[]},{value:"2. Create and use the Randomness trait",id:"2-create-and-use-the-randomness-trait",children:[]},{value:"3. Create and use pallet Events",id:"3-create-and-use-pallet-events",children:[]},{value:"4. How to own and issue a Kitty NFT",id:"4-how-to-own-and-issue-a-kitty-nft",children:[]},{value:"5. How to view owned Kitties",id:"5-how-to-view-owned-kitties",children:[]}]},{value:"Next steps",id:"next-steps",children:[]}],c={toc:d};function l(e){var t=e.components,n=Object(a.default)(e,["components"]);return Object(r.mdx)("wrapper",Object(i.default)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.mdx)("p",null,"In this part of the tutorial, we'll build the parts of our pallet\nneeded to manage the creation, ownership and visualization of our Kitties."),Object(r.mdx)("h2",{id:"learning-outcomes"},"Learning outcomes"),Object(r.mdx)("ul",null,Object(r.mdx)("li",{parentName:"ul"},"Writing a struct to store details about our Kitties"),Object(r.mdx)("li",{parentName:"ul"},"Using the Randomness trait to create unique Kitties"),Object(r.mdx)("li",{parentName:"ul"},"Creating and using pallet Events"),Object(r.mdx)("li",{parentName:"ul"},"Writing functions to own and issue a Kitty "),Object(r.mdx)("li",{parentName:"ul"},"Viewing owned Kitties")),Object(r.mdx)("h2",{id:"overview"},"Overview"),Object(r.mdx)("h2",{id:"steps"},"Steps"),Object(r.mdx)("h3",{id:"1-create-the-kitty-struct"},"1. Create the Kitty struct"),Object(r.mdx)("h4",{id:"understanding-what-information-to-include"},"Understanding what information to include"),Object(r.mdx)("p",null,"Structs are a useful tool to help carry information that corresponds to the same object.\nFor our purposes, instead of using separate storage items for each of our Kitty traits,\nwe can store this information in a single struct. This comes in handy when trying to optimize\nfor storage reads and writes. Let's first go over what information a single Kitty carries:"),Object(r.mdx)("ul",null,Object(r.mdx)("li",{parentName:"ul"},Object(r.mdx)("inlineCode",{parentName:"li"},"id"),": a unique hash to identify each Kitty"),Object(r.mdx)("li",{parentName:"ul"},Object(r.mdx)("inlineCode",{parentName:"li"},"dna"),": the hash used to identify the DNA of a Kitty, which corresponds to its unique features.\nDNA is also used to breed new Kitties and to keep track of different Kitty generations."),Object(r.mdx)("li",{parentName:"ul"},Object(r.mdx)("inlineCode",{parentName:"li"},"price"),": this is a balance that corresponds to the amount needed to buy a Kitty and\ndetermined by its owner"),Object(r.mdx)("li",{parentName:"ul"},Object(r.mdx)("inlineCode",{parentName:"li"},"gender"),": an enum that can be either ",Object(r.mdx)("inlineCode",{parentName:"li"},"Male")," or ",Object(r.mdx)("inlineCode",{parentName:"li"},"Female"),".")),Object(r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.mdx)("div",{parentName:"div",className:"admonition-heading"},Object(r.mdx)("h5",{parentName:"div"},Object(r.mdx)("span",{parentName:"h5",className:"admonition-icon"},Object(r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.mdx)("div",{parentName:"div",className:"admonition-content"},Object(r.mdx)("p",{parentName:"div"},"You could ofcourse add whichever additional pieces of information you want to your\nKitty struct. In this tutorial, we're going to keep things simple."))),Object(r.mdx)("h4",{id:"writing-out-the-struct"},"Writing out the struct"),Object(r.mdx)("p",null,"Now that we know what to include in our Kitty struct, let's recap the basics of declaring a struct.\nAny struct has the following format:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-rust"},"#[derive(Clone, Encode, Decode, Default, PartialEq)]\npub struct SomeStruct<SomeType1, SomeType2> {\n    value_1: SomeType1,\n    value_2: SomeType2,\n")),Object(r.mdx)("p",null,"We use the derive macro to include various helper types for using our struct. "),Object(r.mdx)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.mdx)("div",{parentName:"div",className:"admonition-heading"},Object(r.mdx)("h5",{parentName:"div"},Object(r.mdx)("span",{parentName:"h5",className:"admonition-icon"},Object(r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Your turn!")),Object(r.mdx)("div",{parentName:"div",className:"admonition-content"},Object(r.mdx)("p",{parentName:"div"},"Write out the Kitty struct and include all the essential values.\nHINT: it will take ",Object(r.mdx)("inlineCode",{parentName:"p"},"Hash")," and ",Object(r.mdx)("inlineCode",{parentName:"p"},"Balance")," as its types."))),Object(r.mdx)("h4",{id:"adding-the-hash-dependency"},"Adding the ",Object(r.mdx)("inlineCode",{parentName:"h4"},"Hash")," dependency"),Object(r.mdx)("p",null,"We already know the types of the different items in our struct. There's ",Object(r.mdx)("inlineCode",{parentName:"p"},"Hash"),", ",Object(r.mdx)("inlineCode",{parentName:"p"},"Balance")," and ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender"),". "),Object(r.mdx)("p",null,"For ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender"),", we'll need to build out our own custom enum and functions. Similarly, ",Object(r.mdx)("inlineCode",{parentName:"p"},"Balance"),"\nwill be something we define in our configuration trait. However, we can import\nthe ",Object(r.mdx)("inlineCode",{parentName:"p"},"Hash")," types from the ",Object(r.mdx)("inlineCode",{parentName:"p"},"frame_support")," library. Write this at the top of your pallet where\nthe dependencies are declared:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-rust"},"    use frame_support::sp_runtime::traits::{Hash};\n")),Object(r.mdx)("h4",{id:"adding-the-custom-gender-dependency"},"Adding the custom ",Object(r.mdx)("inlineCode",{parentName:"h4"},"Gender")," dependency"),Object(r.mdx)("p",null,Object(r.mdx)("inlineCode",{parentName:"p"},"Gender")," will have three parts to it:"),Object(r.mdx)("ol",null,Object(r.mdx)("li",{parentName:"ol"},"An enum declaration"),Object(r.mdx)("li",{parentName:"ol"},"A function to configure a defaut value ")),Object(r.mdx)("p",null,"Setting up our ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender")," enum this way allows us to derive a Kitty's gender by the randomness\ncreated by each Kitty's DNA."),Object(r.mdx)("h4",{id:"enums"},"Enums"),Object(r.mdx)("p",null,"Writing enums requires us to use the derive macro which must precede the enum declaration. "),Object(r.mdx)("p",null,"A typical enum would be structured like such:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-rust"},"    #[derive(Encode, Decode, Debug, Clone, PartialEq)]\n    pub enum TypicalEnum {\n        One,\n        Two,\n    }\n")),Object(r.mdx)("p",null,"Then, we can write out the default implementation by using Rust's ",Object(r.mdx)("a",{parentName:"p",href:"https://doc.rust-lang.org/std/default/trait.Default.html"},Object(r.mdx)("inlineCode",{parentName:"a"},"Default")," trait"),".\nThis would look something like this:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-rust"},"    impl Default for TypicalEnum {\n        fn default() -> Self {\n            TypicalEnum::One\n        }\n    }\n")),Object(r.mdx)("p",null,"It's like saying: we're giving our enum a special trait that allows us to initialize it to a specific value.\nGreat, we now know how to create a custom struct and specify its default value. But what about providing\na way for a Kitty struct to be assigned a gender value? For that we need to learn one more thing. "),Object(r.mdx)("h4",{id:"configuring-functions-for-our-kitty-struct"},"Configuring functions for our Kitty struct"),Object(r.mdx)("p",null,"Configuring a struct is useful in order to pre-define a value in our struct. For example, if we want to\nset a value according to what another function returns. In our case we have a similar situation where\nwe need to configure our Kitty struct in such a way that sets ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender")," according to a Kitty's DNA. We'll\nonly be using this function when we're creating Kitties but let's learn how to write it now and get it out\nof the way."),Object(r.mdx)("p",null,"When you're implementing the configuration trait for a struct inside a FRAME pallet, you're doing the\nsame type of thing as implementing some trait for an enum except you're implementing the generic\nconfiguration trait, ",Object(r.mdx)("inlineCode",{parentName:"p"},"Config"),". "),Object(r.mdx)("p",null,"Building off our previous example, this would look like:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-rust"},"impl<T: Config> TypicalEnum {\n        pub fn special_function(some_hash: T::Hash) -> TypicalEnum {\n            if some_hash.as_ref()[0] % 2 == 0 {\n                TypicalEnum::One\n            } else {\n                TypicalEnum::Two\n            }\n        }\n    }\n")),Object(r.mdx)("p",null,"Now whenever ",Object(r.mdx)("inlineCode",{parentName:"p"},"special_function")," is called inside our pallet, it will return the enum value associated with\nthe function's logic."),Object(r.mdx)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.mdx)("div",{parentName:"div",className:"admonition-heading"},Object(r.mdx)("h5",{parentName:"div"},Object(r.mdx)("span",{parentName:"h5",className:"admonition-icon"},Object(r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Your turn!")),Object(r.mdx)("div",{parentName:"div",className:"admonition-content"},Object(r.mdx)("p",{parentName:"div"},"Write out the ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender")," enum, trait implementations and ",Object(r.mdx)("inlineCode",{parentName:"p"},"Config")," implementation to define the behaviour\nof ",Object(r.mdx)("inlineCode",{parentName:"p"},"Gender")," for our ",Object(r.mdx)("inlineCode",{parentName:"p"},"Kitties")," struct."))),Object(r.mdx)("h3",{id:"2-create-and-use-the-randomness-trait"},"2. Create and use the Randomness trait"),Object(r.mdx)("h3",{id:"3-create-and-use-pallet-events"},"3. Create and use pallet Events"),Object(r.mdx)("h3",{id:"4-how-to-own-and-issue-a-kitty-nft"},"4. How to own and issue a Kitty NFT"),Object(r.mdx)("h3",{id:"5-how-to-view-owned-kitties"},"5. How to view owned Kitties"),Object(r.mdx)("h2",{id:"next-steps"},"Next steps"))}l.isMDXComponent=!0}}]);