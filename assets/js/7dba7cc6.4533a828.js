(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{171:function(e,t,n){"use strict";n.r(t),n.d(t,"MDXContext",(function(){return u})),n.d(t,"MDXProvider",(function(){return m})),n.d(t,"mdx",(function(){return f})),n.d(t,"useMDXComponents",(function(){return p})),n.d(t,"withMDXComponents",(function(){return d}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),d=function(e){return function(t){var n=p(t.components);return r.a.createElement(e,o({},t,{components:n}))}},p=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},m=function(e){var t=p(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=i,m=u["".concat(o,".").concat(d)]||u[d]||h[d]||a;return n?r.a.createElement(m,c(c({ref:t},s),{},{components:n})):r.a.createElement(m,c({ref:t},s))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=n[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},54:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var i=n(3),r=n(8),a=(n(0),n(171)),o={sidebar_position:4,keywords:"pallet design, intermediate, runtime"},s={unversionedId:"Tutorials/Kitties/interacting-functions",id:"Tutorials/Kitties/interacting-functions",isDocsHomePage:!1,title:"Part III: Interacting with your Kitties",description:"This is tutorial steps you through building a fully functional dapp for managing Substrate Kitties.",source:"@site/docs/07-Tutorials/01-Kitties/interacting-functions.md",sourceDirName:"07-Tutorials/01-Kitties",slug:"/Tutorials/Kitties/interacting-functions",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/interacting-functions",editUrl:"https://github.com/substrate-developer-hub/substrate-how-to-guides/edit/main/docs/07-Tutorials/01-Kitties/interacting-functions.md",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,keywords:"pallet design, intermediate, runtime"},sidebar:"tutorialSidebar",previous:{title:"Part II: Create, view and own Kitties",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/create-kitties"},next:{title:"Part IV: Kitties front-end",permalink:"/substrate-how-to-guides/docs/Tutorials/Kitties/kitties-frontend"}},c=[{value:"Goal",id:"goal",children:[]},{value:"Overview",id:"overview",children:[]},{value:"Steps",id:"steps",children:[{value:"1. Set a price for each Kitty",id:"1-set-a-price-for-each-kitty",children:[]},{value:"2. Transfer a Kitty",id:"2-transfer-a-kitty",children:[]},{value:"3. Buy a Kitty",id:"3-buy-a-kitty",children:[]},{value:"4. How to breed new Kitties",id:"4-how-to-breed-new-kitties",children:[]}]},{value:"Examples",id:"examples",children:[]},{value:"Resources",id:"resources",children:[]}],l={toc:c};function u(e){var t=e.components,n=Object(r.default)(e,["components"]);return Object(a.mdx)("wrapper",Object(i.default)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.mdx)("p",null,Object(a.mdx)("em",{parentName:"p"},"This is tutorial steps you through building a fully functional dapp for managing Substrate Kitties.")),Object(a.mdx)("h2",{id:"goal"},"Goal"),Object(a.mdx)("p",null,"Build function's to interact with a Kitty NFT."),Object(a.mdx)("h2",{id:"overview"},"Overview"),Object(a.mdx)("p",null,"In this first part, you will break things down into components which you will need to build throughout the tutorial.\nIn doing so, you will learn the basics of setting up a pallet and including basic storage items to run your Substrate node."),Object(a.mdx)("p",null,"Before jumping into the next section, let's have a look at what we'll be doing."),Object(a.mdx)("p",null,"The Kitties tutorial is a step by step guide to build a decentralized application that enables the creation and ownership management\nof NFT Kitties. In this implementation, to keep things simple, Kitties really can only do the following things:"),Object(a.mdx)("ul",null,Object(a.mdx)("li",{parentName:"ul"},"be created either by some original source or by being bred by existing Kitties."),Object(a.mdx)("li",{parentName:"ul"},"be sold at a price set by their owner"),Object(a.mdx)("li",{parentName:"ul"},"be transferred from one owner to another")),Object(a.mdx)("h2",{id:"steps"},"Steps"),Object(a.mdx)("h3",{id:"1-set-a-price-for-each-kitty"},"1. Set a price for each Kitty"),Object(a.mdx)("h3",{id:"2-transfer-a-kitty"},"2. Transfer a Kitty"),Object(a.mdx)("h3",{id:"3-buy-a-kitty"},"3. Buy a Kitty"),Object(a.mdx)("p",null,"In the previous step, we've added the functions necessary to transfer the ownership of our\nKitty NFTs. But there's no actual specification over a\ncurrency transfer that would happen if the Kitty was bought or sold. In this step we'll learn how to use FRAME's Currency trait to adjust account balances\nusing its associated ",Object(a.mdx)("a",{parentName:"p",href:"https://crates.parity.io/frame_support/traits/tokens/currency/trait.Currency.html#tymethod.transfer"},Object(a.mdx)("inlineCode",{parentName:"a"},"transfer")," method"),". "),Object(a.mdx)("p",null,"It's useful to understand how the ",Object(a.mdx)("inlineCode",{parentName:"p"},"transfer")," function can be accessed, and why\nit's important to use it in our case. The reason we'll be using it is to ensure our runtime has the same understanding of currency throughout the pallets\nit interacts with. The way that we ensure this is to use the ",Object(a.mdx)("inlineCode",{parentName:"p"},"Currency")," trait\nfrom ",Object(a.mdx)("a",{parentName:"p",href:"https://crates.parity.io/frame_support/traits/tokens/currency/trait.Currency.html"},Object(a.mdx)("inlineCode",{parentName:"a"},"frame_support")),". Conveniently, it handles a\n",Object(a.mdx)("inlineCode",{parentName:"p"},"Balance")," type, making it compatible with ",Object(a.mdx)("inlineCode",{parentName:"p"},"pallet_balances")," which we've been\nusing from our pallet's configuration trait. Here's how the ",Object(a.mdx)("inlineCode",{parentName:"p"},"transfer"),"\nfunction we'll be using is structured:"),Object(a.mdx)("pre",null,Object(a.mdx)("code",{parentName:"pre",className:"language-rust"},"fn transfer(\n    source: &AccountId,\n    dest: &AccountId,\n    value: Self::Balance,\n    existence_requirement: ExistenceRequirement\n) -> DispatchResult\n")),Object(a.mdx)("p",null,"In order to use this function, we'll need to import ",Object(a.mdx)("inlineCode",{parentName:"p"},"Currency")," and ",Object(a.mdx)("inlineCode",{parentName:"p"},"ExistenceRequirement")," from ",Object(a.mdx)("inlineCode",{parentName:"p"},"frame_support"),". "),Object(a.mdx)("p",null,"Now that we've went over the things that makes this extrinsic unqique,\nyou have everything you need to know to put it together! A brief overview\nmay help you ensure you've included all the right pieces:"),Object(a.mdx)("ul",null,Object(a.mdx)("li",{parentName:"ul"},"Declare your extrinsic with an appropriate weight (100 will do for our purposes)"),Object(a.mdx)("li",{parentName:"ul"},"It will take 3 arguments: ",Object(a.mdx)("inlineCode",{parentName:"li"},"origin"),", ",Object(a.mdx)("inlineCode",{parentName:"li"},"kitty_id")," and ",Object(a.mdx)("inlineCode",{parentName:"li"},"max_price")),Object(a.mdx)("li",{parentName:"ul"},"It will check that kitty_id corresponds to a Kitty in storage"),Object(a.mdx)("li",{parentName:"ul"},"It will check that the Kitty has an owner"),Object(a.mdx)("li",{parentName:"ul"},"It will check that the account buying the Kitty doesn't already own it"),Object(a.mdx)("li",{parentName:"ul"},"It will check that the price of the Kitty is not zero. If it is, it will throw an error"),Object(a.mdx)("li",{parentName:"ul"},"It will check that the Kitty price is not greater than ",Object(a.mdx)("inlineCode",{parentName:"li"},"ask_price")),Object(a.mdx)("li",{parentName:"ul"},"It will use the ",Object(a.mdx)("inlineCode",{parentName:"li"},"transfer")," function from the ",Object(a.mdx)("inlineCode",{parentName:"li"},"Currency")," trait to update\naccount balances (as described above)"),Object(a.mdx)("li",{parentName:"ul"},"It will use our pallet's ",Object(a.mdx)("inlineCode",{parentName:"li"},"transfer_from")," function to change the ownership\nof the Kitty from ",Object(a.mdx)("inlineCode",{parentName:"li"},"owner")," to ",Object(a.mdx)("inlineCode",{parentName:"li"},"sender")),Object(a.mdx)("li",{parentName:"ul"},"It will update the price of the Kitty to the price it was sold at")),Object(a.mdx)("h3",{id:"4-how-to-breed-new-kitties"},"4. How to breed new Kitties"),Object(a.mdx)("h2",{id:"examples"},"Examples"),Object(a.mdx)("h2",{id:"resources"},"Resources"),Object(a.mdx)("h4",{id:"how-to-guides"},"How-to guides"),Object(a.mdx)("h4",{id:"rust-docs"},"Rust docs"))}u.isMDXComponent=!0}}]);